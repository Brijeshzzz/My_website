<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SYSTEM CRITICAL // COMPLETE BREAKDOWN</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');

        /* Color Schemes */
        :root {
            /* Hacked Theme */
            --primary: #0f0; /* Green terminal text */
            --danger: #f00; /* Red alerts */
            --bg: #000;
            /* Mint Bot Theme */
            --mint-primary: #00BF80; /* Bright Mint Green */
            --mint-secondary: #008053; /* Darker Mint */
            --mint-light-bg: #F0F5F0;
            --arch-glow: #00FFFF; /* Cyan/Blue for the Arch glow (Neon accent) */
        }

        /* --- FULL SCREEN GUARANTEE --- */
        html, body {
            margin: 0;
            padding: 0;
            height: 100%; 
            width: 100%;
            overflow: hidden; 
            transition: background-color 0.5s;
        }
        
        body {
            background-color: var(--bg);
            color: var(--primary);
            font-family: 'VT323', monospace;
            user-select: none;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        /* New Aesthetic Body Styles */
        body.mint-bot-mode {
            background-color: var(--mint-light-bg);
            color: #333;
            font-family: 'Inter', sans-serif;
            transition: background-color 0.5s ease-in-out;
            /* Flex layout to center the new bot display */
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative; /* Needed for background layer */
        }

        /* --- KEYFRAMES FOR ENHANCED ANIMATION (UPDATED) --- */
        
        /* New Keyframe: Slowest layer (40s) for sparse code noise */
        @keyframes code-noise-scroll {
            from { background-position-y: 0; }
            to { background-position-y: 100vh; }
        }

        /* New Keyframe: Medium speed layer (25s) for subtle data streams */
        @keyframes text-scroll-medium {
            from { background-position-y: 0; }
            to { background-position-y: 100vh; }
        }

        /* Existing Keyframe (Simplified): Fastest layer (15s) for dense matrix lines */
        @keyframes matrix-scroll-fast {
            from { background-position-y: 0; }
            to { background-position-y: 100vh; }
        }

        /* Keyframe for arch logo glow pulse (Enhanced neon pulse) */
        @keyframes arch-pulse-glow {
            0% { filter: drop-shadow(0 0 10px var(--arch-glow)); opacity: 0.7; }
            50% { filter: drop-shadow(0 0 30px var(--arch-glow)); opacity: 1; } /* More intense pulse */
            100% { filter: drop-shadow(0 0 10px var(--arch-glow)); opacity: 0.7; }
        }
        
        /* Keyframe for subtle digital jitter/unstable data */
        @keyframes digital-jitter {
            0% { transform: translate(-50%, -50%); }
            25% { transform: translate(-50.5%, -50.2%); }
            50% { transform: translate(-49.5%, -49.8%); }
            75% { transform: translate(-50.2%, -50.5%); }
            100% { transform: translate(-50%, -50%); }
        }

        /* New Animation: Slow Bob/Float for 3D depth */
        @keyframes bob-float {
            0% { transform: translate(-50%, -50%) translateY(0px) rotate(0deg); }
            50% { transform: translate(-50%, -50%) translateY(10px) rotate(0deg); } /* Slight up/down movement */
            100% { transform: translate(-50%, -50%) translateY(0px) rotate(0deg); }
        }

        @keyframes arch-spin-slow {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }
        
        /* New: Keyframe for subtle box shadow pulse during typing (2D Animation) */
        @keyframes output-glow-pulse {
            0% { box-shadow: 0 0 5px rgba(0, 191, 128, 0.5), 0 5px 15px rgba(0, 0, 0, 0.1); }
            50% { box-shadow: 0 0 15px rgba(0, 191, 128, 0.8), 0 5px 20px rgba(0, 0, 0, 0.2); }
            100% { box-shadow: 0 0 5px rgba(0, 191, 128, 0.5), 0 5px 15px rgba(0, 0, 0, 0.1); }
        }
        
        /* --- HACKING BACKGROUND (UPDATED) --- */
        #hacking-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 49; 
            background-color: rgba(0, 0, 0, 0.9);
            
            /* Layered background for matrix effect + new code layers + central glow */
            background-image: 
                /* Layer 1 (Static): Central Radial Glow (UX/UI enhancement) */
                radial-gradient(circle at 50% 50%, rgba(0, 255, 255, 0.05) 0%, rgba(0, 0, 0, 0) 70%),
                
                /* Layer 2 (NEW - Slowest Code Glyphs): Text-like sparse noise */
                repeating-linear-gradient(
                    to bottom,
                    rgba(0, 128, 0, 0.05) 0, 
                    rgba(0, 128, 0, 0.1) 1px,
                    transparent 1px,
                    transparent 30px
                ),
                
                /* Layer 3 (NEW - Medium Speed Lines): Fine digital lines/data streams (Cyan tech accent) */
                repeating-linear-gradient(
                    to bottom,
                    rgba(0, 255, 255, 0.1), 
                    rgba(0, 255, 255, 0.2) 1px,
                    transparent 1px,
                    transparent 12px
                ),
                
                /* Layer 4 (Fastest Matrix Lines): Fast, dense green line layer (Original fast matrix) */
                repeating-linear-gradient(
                    to bottom,
                    rgba(0, 255, 0, 0.1), 
                    rgba(0, 255, 0, 0.2) 1px,
                    transparent 1px,
                    transparent 8px
                );
            
            /* Sizes MUST match the number of background layers (4 layers) */
            background-size: 100% 100%, 100% 30px, 100% 12px, 100% 8px; 
            
            /* Animation MUST match the number of moving layers (3 layers: Layer 2, Layer 3, Layer 4) */
            animation: 
                /* Layer 2 (Slowest) */ code-noise-scroll 40s linear infinite, 
                /* Layer 3 (Medium) */ text-scroll-medium 25s linear infinite,
                /* Layer 4 (Fastest) */ matrix-scroll-fast 15s linear infinite;
            
            opacity: 0; 
            transition: opacity 1s ease-in-out;
            
            /* Enhanced outer glow/shadows for high contrast */
            box-shadow: inset 0 0 150px rgba(0, 255, 0, 0.2), 0 0 50px rgba(0, 255, 255, 0.1);
            filter: drop-shadow(0 0 10px rgba(0, 255, 0, 0.5));
            overflow: hidden; 
        }

        /* Arch Logo Styles (Central and Animated) */
        .arch-logo {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 50vmin; 
            height: 50vmin;
            fill: var(--arch-glow);
            
            /* Combine multiple animations for complexity and instability */
            animation: arch-pulse-glow 2s infinite alternate, 
                       arch-spin-slow 60s linear infinite, 
                       digital-jitter 0.5s infinite alternate,
                       bob-float 10s ease-in-out infinite; 
            
            opacity: 0.8;
            z-index: 5;
            filter: drop-shadow(0 0 5px var(--arch-glow)) brightness(1.2); /* Enhance glossy look */
        }
        
        /* ----------------------------- */

        /* CRT Scanline Effect Overlay */
        .scanlines {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                to bottom,
                rgba(255, 255, 255, 0),
                rgba(255, 255, 255, 0) 50%,
                rgba(0, 0, 0, 0.2) 50%,
                rgba(0, 0, 0, 0.2)
            );
            background-size: 100% 4px;
            z-index: 10;
            pointer-events: none;
        }

        /* Blackout Overlay (For 1-second transition) */
        #blackout-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: black;
            z-index: 100;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-in-out;
        }
        #blackout-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* Main Hacked Container (Pre-bot phase) */
        .container {
            position: relative;
            z-index: 5;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            width: 100vw;
            background: rgba(0, 0, 0, 0.9);
            padding: 5px; /* Reduced padding */
            box-sizing: border-box;
            overflow: hidden; 
        }

        /* Alarm Flash Animation - Red Pulse */
        @keyframes alarm-flash {
            0% { 
                filter: brightness(1); 
                box-shadow: inset 0 0 100px rgba(255, 0, 0, 0.1);
            }
            50% { 
                filter: brightness(1.5); 
                box-shadow: inset 0 0 150px rgba(255, 0, 0, 0.5);
                background-color: rgba(255, 0, 0, 0.05); 
            }
            100% { 
                filter: brightness(1); 
                box-shadow: inset 0 0 100px rgba(255, 0, 0, 0.1);
            }
        }
        .alarm-active { animation: alarm-flash 0.2s infinite alternate; }

        /* Skull and Message Wrapper */
        .skull-wrapper {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 25;
            background: rgba(0, 0, 0, 0.95); /* Slightly darker background */
            padding: 15px; /* Reduced padding */
            border-radius: 8px; /* Slightly smaller radius */
            border: 3px solid var(--danger);
            box-shadow: 0 0 50px rgba(255, 0, 0, 0.7);
            animation: pulse-red 2s infinite;
            
            opacity: 0; 
            transition: opacity 0.5s; 
            text-align: center;
        }

        @keyframes pulse-red {
            0% { box-shadow: 0 0 20px var(--danger); }
            50% { box-shadow: 0 0 60px var(--danger); }
            100% { box-shadow: 0 0 20px var(--danger); }
        }

        .skull-svg {
            width: 120px; /* Reduced skull size */
            height: 120px;
            fill: var(--danger); 
            margin: 5px auto 5px auto; 
            filter: drop-shadow(0 0 25px var(--danger)); 
            animation: flicker 0.1s infinite; 
            z-index: 20;
        }
        .main-hacked-message {
            color: var(--danger); font-size: 3rem; /* Reduced text size */
            text-align: center;
            text-shadow: 0 0 15px var(--danger); animation: flicker 0.1s infinite;
            letter-spacing: 4px; margin: 5px 0; line-height: 1;
        }
        .hacked-subtitle {
            color: var(--danger); font-size: 1.2rem; /* Reduced text size */
            text-align: center;
            margin: 5px 0 10px 0; 
            text-shadow: 0 0 5px var(--danger);
            animation: flicker 0.1s infinite; letter-spacing: 2px;
        }

        /* Grid for Chaotic Terminals */
        .terminal-grid {
            display: grid;
            gap: 3px; /* Reduced gap between panels */
            width: 100%;
            height: 100%;
            padding: 0; /* Removed padding */
            box-sizing: border-box;
            
            /* Denser Base Grid: 8 columns, 8 rows */
            grid-template-columns: repeat(8, 1fr);
            grid-template-rows: repeat(8, 1fr);
        }

        /* Individual Terminal Panel */
        .terminal-panel {
            background: rgba(0, 20, 0, 0.85);
            border: 1px solid var(--primary); /* Reduced border thickness */
            padding: 5px; /* Reduced padding */
            overflow-y: scroll;
            font-size: 0.8rem; /* Slightly smaller font for denser look */
            line-height: 1.2;
            box-shadow: 0 0 3px var(--primary), inset 0 0 1px rgba(0, 255, 0, 0.5);
            color: var(--primary);
            min-height: 0; 
        }
        
        /* Hide scrollbars on terminal panels */
        .terminal-panel::-webkit-scrollbar { display: none; }
        .terminal-panel { -ms-overflow-style: none; scrollbar-width: none; }

        /* Custom Sizing for Chaos (Desktop Layout - Remapped for 8x8 grid) */
        #terminal-1 { grid-column: span 3; grid-row: span 3; } 
        #terminal-2 { grid-column: span 1; grid-row: span 2; } 
        #terminal-3 { grid-column: span 2; grid-row: span 2; } 
        #terminal-4 { grid-column: span 2; grid-row: span 1; } 
        #terminal-5 { grid-column: span 2; grid-row: span 2; } 
        #terminal-6 { grid-column: span 2; grid-row: span 1; } 
        #terminal-7 { grid-column: span 1; grid-row: span 2; } 
        #terminal-8 { grid-column: span 4; grid-row: span 1; } 
        #terminal-9 { grid-column: span 3; grid-row: span 4; } 
        #terminal-10 { grid-column: span 1; grid-row: span 4; } 
        #terminal-11 { grid-column: span 2; grid-row: span 3; } 
            /* Grid cells below here are already mapped based on the previous 8x8 layout */
        #terminal-12 { grid-column: span 2; grid-row: span 2; } 
        #terminal-13 { grid-column: span 2; grid-row: span 1; } 
        #terminal-14 { grid-column: span 2; grid-row: span 1; } 
        #terminal-15 { grid-column: span 2; grid-row: span 1; } 


        /* Info/Alarm Messages */
        .log-entry.error { color: var(--danger); text-shadow: 0 0 2px var(--danger); }
        .log-entry.success { color: var(--primary); }
        .log-entry.warning { color: yellow; }
        .log-entry.code { color: #888; } 

        .lockout-msg, .connection-lost-msg {
            position: fixed; z-index: 30; padding: 5px 10px; font-family: sans-serif;
            font-size: 0.8rem; background: var(--danger); color: #fff;
        }
        .lockout-msg { bottom: 20px; right: 20px; }
        .connection-lost-msg { 
            bottom: 10px; right: 10px; font-size: 1.1rem; padding: 8px 15px; 
            border: 1px solid var(--danger); text-shadow: 0 0 5px var(--danger);
            animation: flicker 0.1s infinite, pulse-red-text 1.5s infinite alternate;
            z-index: 28; 
        }
        
        /* --- MINT BOT INTERFACE STYLES (Full Screen Bot) --- */
        #fullscreen-bot-display {
            display: none; /* Controlled by JS */
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            width: 100vw;
            z-index: 50; /* Bot must be on top of the hacking background */
            text-align: center;
            padding: 20px;
        }
        
        .bot-status-bar {
            background: var(--mint-primary); 
            color: white; 
            padding: 10px 20px; 
            font-size: 1.2rem; 
            font-weight: 700; 
            border-radius: 8px;
            width: 100%; 
            max-width: 500px; 
            margin-bottom: 20px; /* Separates status bar from bot SVG */
        }

        .bot-text-output {
            background: white; 
            color: #333; 
            padding: 20px; 
            border-radius: 8px; 
            font-family: 'Inter', sans-serif; 
            max-width: 500px;
            width: 100%;
            /* ENHANCED DEFAULT GLOW/SHADOW */
            box-shadow: 0 0 3px rgba(0, 191, 128, 0.3), 0 5px 15px rgba(0, 0, 0, 0.1); 
            border: 1px solid var(--mint-light-bg); 
            transition: all 0.2s ease-in-out;
            min-height: 50px; 
            text-align: left;
            margin-top: 20px; 
            display: flex;
            align-items: center;
        }
        
        /* NEW CLASS: Applies pulsing glow when typing is active */
        .bot-text-output.typing-active {
            border-color: var(--mint-primary);
            animation: output-glow-pulse 1.5s infinite alternate;
        }
        
        /* --- NEW STYLES FOR CHOICES --- */
        .choice-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 30px;
            width: 100%;
            max-width: 500px;
        }
        .choice-button {
            background-color: white;
            color: var(--mint-secondary);
            border: 2px solid var(--mint-primary);
            padding: 15px;
            border-radius: 8px;
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            text-align: center;
        }
        .choice-button:hover {
            background-color: var(--mint-primary);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        /* New Typing Animation for Text Output */
        @keyframes typing {
          from { width: 0 }
          to { width: 100% }
        }
        
        .typing-effect {
            white-space: nowrap;
            overflow: hidden;
            border-right: .2em solid var(--mint-secondary); /* Thicker block cursor for better 2D look */
            font-size: 1.1rem;
            display: inline-block; /* Crucial for animation */
        }
        
        @keyframes blink-caret {
          from, to { border-color: transparent }
          50% { border-color: var(--mint-secondary); }
        }
        
        /* Robot Icon Animation (Internal Pulsing) */
        @keyframes bot-pulse {
            0% { transform: scale(1); opacity: 1; text-shadow: none; }
            50% { transform: scale(1.05); opacity: 0.9; text-shadow: 0 0 5px white; }
            100% { transform: scale(1); opacity: 1; text-shadow: none; }
        }
        
        /* Animation 1: Head Tilt (3D nod effect) */
        @keyframes bot-tilt {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            40% { transform: translateY(-1px) rotate(1deg); }
            80% { transform: translateY(1px) rotate(-1deg); }
        }
        
        /* Animation 2: Blinking Eyes */
        @keyframes bot-blink {
            0%, 30%, 35%, 100% { transform: scaleY(1); }
            32%, 33% { transform: scaleY(0.1); }
        }

        /* Animation 3: Speaking Mouth */
        @keyframes mouth-speak {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2, 0.8); opacity: 0.8; }
        }

        /* New Animation 4: Smiling Mouth */
        .bot-mouth-group.smiling rect {
            /* Create an upward arc/smile look */
            transform: scale(1.2, 0.5) translateY(4px); 
            transition: transform 0.2s;
            rx: 5; /* More rounded corners */
        }
        /* Ensure smiling overrides speaking animation when applicable, but speaking can still move a smiling mouth */
        .bot-mouth-group.smiling.speaking rect {
             /* Reset transformation for speaking but maintain color/roundness */
             transform: none; 
             rx: 1.5;
        }

        /* General Bot Styles */
        .svg-bot-icon {
            width: 180px; 
            height: 180px;
            filter: drop-shadow(0 0 15px var(--mint-primary));
            margin-bottom: 20px;
        }

        .bot-head-group {
            transform-origin: 50% 90%; 
            animation: bot-tilt 5s infinite ease-in-out;
        }

        .bot-eyes-group {
            transform-origin: center;
            animation: bot-blink 4s infinite; 
            fill: #73e8ff; 
        }
        
        .bot-mouth-group {
            fill: #73e8ff; 
            transform-origin: center;
            transition: transform 0.1s;
        }
        .bot-mouth-group.speaking {
            animation: mouth-speak 0.2s infinite alternate;
        }

        /* Other Animations */
        @keyframes flicker { 0% { opacity: 0.8; } 5% { opacity: 0.5; } 10% { opacity: 0.9; } 15% { opacity: 0.1; }
            20% { opacity: 1; } 50% { opacity: 0.8; } 100% { opacity: 0.9; } }
        @keyframes pulse-red-text { 0% { transform: scale(1); opacity: 0.8; } 50% { transform: scale(1.02); opacity: 1; }
            100% { transform: scale(1); opacity: 0.8; } }

        /* Responsive adjustments */
        @media (max-width: 1023px) {
            .terminal-grid { grid-template-columns: repeat(2, 1fr); grid-template-rows: repeat(auto-fit, minmax(10vh, 1fr)); }
            .terminal-grid > div { grid-column: span 1 !important; grid-row: span 1 !important; height: 10vh; }
            .svg-bot-icon { width: 120px; height: 120px; }
            .bot-status-bar, .bot-text-output, .choice-container { max-width: 95%; }
        }

    </style>
</head>
<body>

    <div class="scanlines"></div>
    

<div class="container alarm-active" id="hackedContainer">
        
        <div class="skull-wrapper" id="skullWrapper">
            <!-- Guaranteed inline SVG skull -->
            <svg class="skull-svg" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM9 9c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm6 0c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zM9 13h6c.55 0-1 .45-1 1s-.45 1-1 1H9c-.55 0-1-.45-1-1s.45-1 1-1zm-1 2h8v2H8z"/>
            </svg>
            <div class="main-hacked-message">U HAVE BEEN HACKED</div>
            <div class="hacked-subtitle">DUE TO UNPATCHED VULNERABILITIES</div>
        </div>

        <div class="terminal-grid">
            <!-- 15 Terminal Panels with preloaded error messages for immediate visibility -->
            <div class="terminal-panel" id="terminal-1">
                <div class="log-entry error">[00:00:01] KERNEL PANIC: Segmentation fault.</div>
                <div class="log-entry warning">[00:00:02] CPU OVR: Thread exhaustion.</div>
                <div class="log-entry success">[00:00:03] Rerouting control to root shell.</div>
            </div>
            <div class="terminal-panel" id="terminal-2">
                <div class="log-entry error">[00:00:01] FIREWALL 443: Unauthorized transfer.</div>
                <div class="log-entry warning">[00:00:02] SSH: Password brute-force successful.</div>
                <div class="log-entry code">[00:00:03] Attempting file delete: user.log</div>
            </div>
            <div class="terminal-panel" id="terminal-3">
                <div class="log-entry warning">[00:00:01] DB: Accessing 'accounts' table...</div>
                <div class="log-entry warning">[00:00:02] DB: Extracting field 'password_hash'.</div>
                <div class="log-entry error">[00:00:03] DB: Connection terminated by remote host.</div>
            </div>
            <div class="terminal-panel" id="terminal-4">
                <div class="log-entry error">[00:00:01] ERROR: Null pointer reference.</div>
            </div>
            <div class="terminal-panel" id="terminal-5">
                <div class="log-entry code">[00:00:01] Memory leak detected in PID 901.</div>
                <div class="log-entry error">[00:00:02] Process: System watchdog killed.</div>
            </div>
            <div class="terminal-panel" id="terminal-6">
                <div class="log-entry warning">[00:00:01] UPLOAD: Starting data stream (Wide)</div>
            </div>
            <div class="terminal-panel" id="terminal-7">
                <div class="log-entry error">[00:00:01] ROOT: Permission denied on /etc/shadow.</div>
                <div class="log-entry success">[00:00:02] ROOT: Access granted. (Tall)</div>
            </div>
            <div class="terminal-panel" id="terminal-8">
                <div class="log-entry error">[00:00:01] I/O: RAID-1 disk parity failed. (Very Wide)</div>
            </div>
            <div class="terminal-panel" id="terminal-9">
                <div class="log-entry warning">[00:00:01] ENCRYPTION: Key space reduced.</div>
                <div class="log-entry success">[00:00:02] ENCRYPTION: Key matched. Decrypting. (Large)</div>
            </div>
            <div class="terminal-panel" id="terminal-10">
                <div class="log-entry code">[00:00:01] Kill process PIDs: 1, 5, 9.</div>
                <div class="log-entry error">[00:00:02] WARNING: Unsafe termination. (Extra Tall)</div>
            </div>
            <div class="terminal-panel" id="terminal-11">
                <div class="log-entry success">[00:00:01] BOTNET: Confirmed 500 slaves online.</div>
                <div class="log-entry warning">[00:00:02] BOTNET: Awaiting command signal. (Medium)</div>
            </div>
            <div class="terminal-panel" id="terminal-12">
                <div class="log-entry error">[00:00:01] Traceback 0xAF.</div>
            </div>
            <div class="terminal-panel" id="terminal-13">
                <div class="log-entry warning">[00:00:01] File corruption in sector A.</div>
            </div>
            <div class="terminal-panel" id="terminal-14">
                <div class="log-entry code">[00:00:01] Shutdown hook active.</div>
            </div>
            <div class="terminal-panel" id="terminal-15">
                <div class="log-entry success">[00:00:01] Clean exit sequence disabled.</div>
            </div>
        </div>

    </div>
    
    <!-- Stage 4: Full-Screen Bot Display (Starts Hidden) -->
    <div id="fullscreen-bot-display" style="display: none;">
        
        <div class="bot-status-bar" id="bot-status">Stabilizing system...</div>

        <!-- Animated SVG Bot Icon (Larger) -->
        <svg class="svg-bot-icon" viewBox="0 0 100 100" fill="#00BF80" xmlns="http://www.w3.org/2000/svg">
            <!-- Head Group for Tilt Animation -->
            <g class="bot-head-group">
                <!-- Head/Screen (Main Body) -->
                <rect x="25" y="10" width="50" height="30" rx="6" fill="#1f2937"/>
                <!-- Antenna -->
                <rect x="47.5" y="5" width="5" height="5" rx="1" fill="#FFFFFF"/>
                <!-- Ear/Side Components -->
                <rect x="20" y="20" width="5" height="15" rx="2" fill="#FFFFFF"/>
                <rect x="75" y="20" width="5" height="15" rx="2" fill="#FFFFFF"/>
                
                <!-- Eyes Group for Blinking Animation -->
                <g class="bot-eyes-group">
                    <circle cx="38" cy="25" r="4" />
                    <circle cx="62" cy="25" r="4" />
                </g>

                <!-- Mouth Group for Speaking/Smiling Animation -->
                <g class="bot-mouth-group">
                    <rect x="45" y="32" width="10" height="3" rx="1.5" />
                </g>
                
                <!-- Glow/Reflection on Screen -->
                <path d="M 28 13 C 35 15, 65 15, 72 13 L 72 10 L 28 10 Z" fill="rgba(255, 255, 255, 0.15)"/>
            </g>

            <!-- Body (Sphere-like bottom) -->
            <path d="M30 40 C 15 50, 15 80, 50 85 C 85 80, 85 50, 70 40 L 30 40 Z" fill="#FFFFFF" stroke="#ddd" stroke-width="1"/>
            <!-- Arms (Simple paddles) -->
            <rect x="15" y="55" width="10" height="20" rx="5" fill="#e5e7eb"/>
            <rect x="75" y="55" width="10" height="20" rx="5" fill="#e5e7eb"/>
        </svg>

        <!-- Main Text Output -->
        <div class="bot-text-output">
            <span id="typed-text"></span>
        </div>

        <!-- NEW CHOICE CONTAINER -->
        <div id="choice-options" class="choice-container" style="display: none;">
            <!-- Buttons will be injected here -->
        </div>
    </div>
    
    <!-- Stage 3: Blackout Overlay (Starts Hidden) -->
    <div id="blackout-overlay"></div>
    
    <!-- NEW HACKING BACKGROUND LAYER -->
    <div id="hacking-background">
        <!-- Stylized BlackArch-inspired logo (single SVG element for clear animation) -->
        <svg class="arch-logo" viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg">
            <!-- Central Arch/Shape: Added a semi-transparent black fill for depth -->
            <path d="M100 250 L250 100 L400 250 C 350 300, 150 300, 100 250 Z" 
                  stroke="currentColor" stroke-width="20" fill="rgba(0, 0, 0, 0.5)" 
                  stroke-linecap="round" stroke-linejoin="round"/>
            <!-- Inner Blade/Spike -->
            <path d="M250 100 L250 450" 
                  stroke="currentColor" stroke-width="10" fill="none" 
                  stroke-linecap="round"/>
        </svg>
    </div>

    <!-- Fixed messages -->
    <div class="connection-lost-msg">!!! CONNECTION LOST !!!</div>
    <div class="lockout-msg">CLICK ANYWHERE TO BEGIN SEQUENCE</div>

    <script>
        // --- TIMING CONSTANTS ---
        const TIME_REVEAL_MESSAGE = 6000; // 6 seconds
        const TIME_BLACKOUT = 9000;       // 6 + 3 = 9 seconds
        const TIME_MINT_BOT_START = 10000; // 9 + 1 = 10 seconds (allows 1s of pure black)

        // --- GLOBAL VARIABLES (Will be assigned in init) ---
        let skullWrapper;
        let hackedContainer;
        let blackoutOverlay;
        const terminalLogs = [];
        let typingTimeout;

        // --- CONVERSATION DATA ---
        const sequenceMessages = [
            // Ensure first line is complete and smiling
            { text: "I was just kidding! You are not hacked.", isSmiling: true, pauseAfter: 800 },
            { text: "Hi, I am Brijesh Sir's assistant bot.", isSmiling: false, pauseAfter: 500 },
            // Text stopped at "two" as requested.
            { text: "To visit Brijesh, you must choose one of the following two", isSmiling: false, pauseAfter: 0 }
        ];

        const choices = [
            "Brijesh who OBEYS his mom",
            "Brijesh who OBEYS his laptop"
        ];

        // --- TEXT ANIMATION UTILITY ---
        function typeText(element, text, durationInSeconds) {
            const charCount = text.length;
            const typingDuration = durationInSeconds || 4;
            const steps = charCount;

            element.textContent = ''; 
            element.style.width = '100%'; 

            // Apply calculated animation properties
            element.style.animation = `typing ${typingDuration}s steps(${steps}, end), blink-caret .75s step-end infinite`;
            
            // Set the full text immediately for the CSS animation to work
            element.textContent = text;

            // Stop animation and remove cursor after duration
            if (typingTimeout) clearTimeout(typingTimeout);
            typingTimeout = setTimeout(() => {
                element.style.animation = 'none';
                element.style.borderRight = 'none';
            }, typingDuration * 1000 + 100);
        }
        
        const mouthElement = () => document.querySelector('.bot-mouth-group');
        const statusDiv = () => document.getElementById('bot-status');
        const typedTextElement = () => document.getElementById('typed-text');
        
        /**
         * Simulates TTS output by displaying text with typing animation.
         */
        function simulateTextOutput(text) {
            return new Promise(async (resolve, reject) => {
                const outputBox = document.querySelector('.bot-text-output'); // Get the box element
                if (statusDiv()) statusDiv().textContent = "Displaying transmission...";
                
                // Clear previous animation
                if (typingTimeout) clearTimeout(typingTimeout);
                typedTextElement().style.animation = 'none';
                typedTextElement().style.borderRight = 'none';

                // Calculate typing duration (0.05s per character)
                const typingDuration = text.length * 0.05;
                
                // Apply speaking state and NEW glow animation to the container
                mouthElement()?.classList.add('speaking');
                outputBox?.classList.add('typing-active'); // ADD GLOW CLASS
                typedTextElement().classList.add('typing-effect');
                typeText(typedTextElement(), text, typingDuration);
                
                // Wait for the duration of the typing animation before resolving
                await new Promise(res => setTimeout(res, typingDuration * 1000 + 100));
                
                // Cleanup: remove speaking state and glow class
                mouthElement()?.classList.remove('speaking');
                outputBox?.classList.remove('typing-active'); // REMOVE GLOW CLASS
                typedTextElement().style.animation = 'none';
                typedTextElement().style.borderRight = 'none';
                if (statusDiv()) statusDiv().textContent = "Transmission complete.";
                
                resolve();
            });
        }
        
        // --- CONVERSATION SEQUENCING ---

        async function saySequence(messages) {
            const typedTextElem = typedTextElement();

            for (const message of messages) {
                // Clear text output before new message starts
                typedTextElem.textContent = '';
                
                // 1. Apply smile state if needed
                if (message.isSmiling) {
                    mouthElement()?.classList.add('smiling');
                }
                
                // 2. Wait for the text animation to complete
                await simulateTextOutput(message.text);
                
                // 3. Remove smile and speaking states immediately after speaking that line
                mouthElement()?.classList.remove('smiling', 'speaking');
                
                // 4. Short pause between lines
                if (message.pauseAfter > 0) {
                    await new Promise(resolve => setTimeout(resolve, message.pauseAfter));
                }
            }
            
            // After the sequence, show the choices
            showChoices();
        }

        function showChoices() {
            const choicesContainer = document.getElementById('choice-options');
            choicesContainer.style.display = 'flex';
            
            if (statusDiv()) statusDiv().textContent = "Awaiting user decision...";

            choicesContainer.innerHTML = choices.map(choice => 
                `<button class="choice-button" onclick="handleChoice(this)">${choice}</button>`
            ).join('');
        }

        function handleChoice(button) {
            // Disable all buttons to prevent multiple clicks
            document.querySelectorAll('.choice-button').forEach(btn => btn.disabled = true);
            
            // Simple placeholder response (use custom modal instead of alert)
            if (statusDiv()) statusDiv().textContent = `Decision Made: ${button.textContent}`;
            
            // Add a visual flair to the chosen option
            button.style.backgroundColor = 'var(--mint-secondary)';
            button.style.color = 'white';
            button.style.borderColor = 'var(--mint-secondary)';
            
            // Further storytelling logic would go here
        }

        // --- DOM INITIALIZATION (Guarantees elements exist before access) ---
        function init() {
            skullWrapper = document.getElementById('skullWrapper');
            hackedContainer = document.getElementById('hackedContainer');
            blackoutOverlay = document.getElementById('blackout-overlay');
            
            for (let i = 1; i <= 15; i++) {
                terminalLogs.push(document.getElementById(`terminal-${i}`));
            }

            // Set up timers initially
            setTimeout(triggerRevealMessage, TIME_REVEAL_MESSAGE);
            setTimeout(triggerBlackout, TIME_BLACKOUT);
            setTimeout(triggerMintBot, TIME_MINT_BOT_START);
            
            // Start the background log noise
            setTimeout(addLog, 10);
        }

        // --- STAGE CONTROL FUNCTIONS ---
        function triggerRevealMessage() {
            if (skullWrapper) {
                skullWrapper.style.opacity = 1; 
            }
        }

        function triggerBlackout() {
            if (blackoutOverlay) {
                blackoutOverlay.classList.add('active');
            }
        }

        function triggerMintBot() {
            document.body.classList.add('mint-bot-mode');
            
            if (hackedContainer) hackedContainer.style.display = 'none';
            if (blackoutOverlay) blackoutOverlay.classList.remove('active');
            
            const scanlines = document.querySelector('.scanlines');
            const connectionMsg = document.querySelector('.connection-lost-msg');
            const lockoutMsg = document.querySelector('.lockout-msg');
            const hackingBg = document.getElementById('hacking-background');

            if (scanlines) scanlines.style.display = 'none';
            if (connectionMsg) connectionMsg.style.display = 'none';
            if (lockoutMsg) lockoutMsg.style.display = 'none';

            // Show hacking background with a fade-in
            if (hackingBg) {
                hackingBg.style.display = 'block';
                setTimeout(() => hackingBg.style.opacity = 1, 10);
            }
            
            const fsBotDisplay = document.getElementById('fullscreen-bot-display');
            if (fsBotDisplay) fsBotDisplay.style.display = 'flex';
            
            // Start the new conversational sequence
            saySequence(sequenceMessages);
        }

        // --- MOUSE CLICK HANDLER (No Audio) ---
        document.addEventListener('click', function initSequence(event) {
            // This listener primarily handles the first user interaction 
            // and removes the hint message if the user interacts before the timer.
            const lockoutMsg = document.querySelector('.lockout-msg');
            if (lockoutMsg) {
                lockoutMsg.textContent = "SEQUENCE ACTIVE. STAND BY.";
                // We leave the listener in place so the mouse click is consumed.
            }
        });


        // --- FAKE MULTI-SCREEN TERMINAL LOGIC ---
        const messages = [
            { text: "CRITICAL KERNEL EXCEPTION: Unhandled page fault at 0x00000000", type: "error" },
            { text: "INJECTION: /dev/null/bypass_root_auth.sh... OK", type: "success" },
            { text: "Error: Could not allocate memory for process PID 778.", type: "error" },
            { text: "ACCESSING: Database 'users' table... (500,000 records pulled)", type: "warning" },
            { text: "DATA LEAK: E-Mail and Password hashes extracted.", type: "warning" },
            { text: "Rerouting connection through TOR exit node [185.220.101.40]...", type: "code" },
            { text: "UPLOAD COMPLETE: Payload confirmed on target machine.", type: "success" },
            { text: "!!! SYSTEM SHUTDOWN INITIATED by remote user. !!!", type: "error" },
            { text: "rm -rf /usr/local/bin/*", type: "code" },
            { text: "FILE_SYSTEM_CORRUPTION_INDEX_5.9.8.7.0...", type: "error" },
            { text: "SCANNING NETWORK: Discovered 14 active devices.", type: "code" },
            { text: "AUTHENTICATION FAILURE for user 'admin' using default credentials.", type: "code" },
            { text: "VULNERABILITY DETECTED: SSH Port 22 open.", type: "warning" },
            { text: "Closing all external connections...", type: "success" },
            { text: "LOG: Unauthorized access detected. Session ID 849302A. User location verified.", type: "warning" },
        ];
        
        function generateNoise() {
            let noise = "";
            const length = Math.floor(Math.random() * 20) + 30;
            const noiseChars = "01$#@!%&^()_+-=~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
            for (let i = 0; i < length; i++) {
                noise += noiseChars[Math.floor(Math.random() * noiseChars.length)];
            }
            return noise;
        }

        function addLog() {
            if (hackedContainer && hackedContainer.style.display === 'none') return; 
            
            const isNoise = Math.random() < 0.7; 
            let logData;

            if (isNoise) {
                logData = { text: generateNoise(), type: "code" };
            } else {
                logData = messages[Math.floor(Math.random() * messages.length)];
            }
            
            const targetIndex = Math.floor(Math.random() * terminalLogs.length);
            const targetTerminal = terminalLogs[targetIndex];

            const div = document.createElement('div');
            
            if (targetTerminal) {
                if (!isNoise) {
                    const now = new Date();
                    const time = now.getHours().toString().padStart(2, '0') + ":" + 
                                now.getMinutes().toString().padStart(2, '0') + ":" + 
                                now.getSeconds().toString().padStart(2, '0');
                    div.textContent = `[${time}] ${logData.text}`;
                } else {
                    div.textContent = logData.text;
                }
                
                div.className = `log-entry ${logData.type}`;
                targetTerminal.appendChild(div);
                
                targetTerminal.scrollTop = targetTerminal.scrollHeight;
            }


            setTimeout(addLog, Math.random() * 50 + 5);
        }

        // --- START APPLICATION ---
        window.onload = init; // Wait for everything to load safely

    </script>
</body>
</html>